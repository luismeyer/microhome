# Install node dependencies
install:lifx-service:
  extends: .install_node_sls_job
  artifacts:
    paths:
      - lifx-service/node_modules/
  cache:
    untracked: true
    key: "$CI_BUILD_REF_NAME"
    paths:
      - lifx-service/node_modules/
  before_script:
    - cd lifx-service


# Deploy service with the serverless framework
deploy:lifx-service:
  extends: .deploy_node_sls_job
  needs:
    - job: install:lifx-service
      artifacts: true
  before_script:
    - npm install -g serverless@latest
    - cd lifx-service
    - echo "FINISHED SETUP"