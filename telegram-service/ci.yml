# Install node dependencies
install:telegram-service:
  extends: .install_java_docker_job
  artifacts:
    paths:
      - telegram-service/target/
  before_script:
    - cd telegram-service

# Deploy service with the serverless framework
deploy:telegram-service:
  extends: .deploy_java_docker_job
  needs:
    - job: install:telegram-service
      artifacts: true
  before_script:
    - pip install awscli
    - apt-get update
    - apt-get install zip
    - cd telegram-service
  script:
    - rm -rf .idea src .m2
    - zip -r service .
    - aws s3 mv service.zip s3://home-assistant-telegram-service-build/
